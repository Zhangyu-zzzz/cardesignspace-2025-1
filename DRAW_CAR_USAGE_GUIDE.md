# 🚗 "画个车"功能使用指南

## 🎮 如何体验新功能

### 1. 💥 冲击波效果

**操作步骤：**
1. 进入"参观车库"
2. 等待载具加载完成
3. 点击车库中的**空白区域**（不要点载具）
4. 观察周围的载具被震开

**效果：**
```
点击空白处 → 🌊 冲击波扩散 → 载具被震飞
```

**参数说明：**
- 影响范围：220像素
- 越近的载具受到的力越大
- 会自动设置碰撞冷却

---

### 2. 💥 碰撞红色闪烁

**观察方式：**
1. 进入车库
2. 等待载具互相碰撞
3. 碰撞瞬间会出现**红色光晕**
4. 持续约0.16秒（10帧 @ 60fps）

**效果对比：**
```
普通载具: 🚗
悬停载具: ✨🚗✨ (蓝色光晕)
碰撞瞬间: 💥🚗💥 (红色闪光)
```

---

### 3. ✨ 悬停高亮效果

**操作步骤：**
1. 进入车库
2. 将鼠标移动到载具上（不要点击）
3. 观察蓝色光晕效果
4. 鼠标指针会变成小手

**效果：**
- 蓝色柔和光晕
- 鼠标指针：pointer
- 移开后恢复

---

### 4. 🎢 物理碰撞

**自动触发：**
- 载具在车库中自动移动
- 互相碰撞时遵循物理规律
- 大车撞小车：小车飞得更远
- 小车撞大车：大车几乎不动

**物理特性：**
- ✅ 动量守恒
- ✅ 能量衰减（每次碰撞损失15%能量）
- ✅ 质量系统（大小车不同效果）
- ✅ 边界反弹（撞墙损失5%速度）

---

### 5. 🔍 调试模式

**开启方式：**
```javascript
// 1. 打开浏览器开发者工具（F12）
// 2. 切换到 Console 标签
// 3. 找到Vue实例并执行：
vm.$children[0].$children[0].$data.debugShowBounds = true

// 或者直接访问全局变量（如果有的话）
window.$vm.$data.debugShowBounds = true
```

**效果：**
- 显示蓝色圆圈表示碰撞边界
- 可视化每个载具的碰撞范围
- 方便调试和调整

**关闭调试：**
```javascript
vm.$data.debugShowBounds = false
```

---

## 📊 参数调优指南

### 如果碰撞太激烈

**降低碰撞强度：**
修改 `frontend/src/views/DrawCar.vue` 第660行：
```javascript
// 原来
const restitution = 0.85

// 改为
const restitution = 0.7  // 碰撞后保留70%能量
```

**降低移动速度：**
修改第413-414行：
```javascript
// 原来
vx: (Math.random() - 0.5) * 3
vy: (Math.random() - 0.5) * 3

// 改为
vx: (Math.random() - 0.5) * 2  // 降低速度
vy: (Math.random() - 0.5) * 2
```

---

### 如果碰撞太温和

**提高碰撞强度：**
```javascript
const restitution = 1.0  // 完全弹性碰撞（100%能量保留）
```

**提高移动速度：**
```javascript
vx: (Math.random() - 0.5) * 5  // 提高速度
vy: (Math.random() - 0.5) * 5
```

---

### 如果冲击波太强

**降低冲击参数：**
修改第534行：
```javascript
// 原来
this.applyRadialImpulse(x, y, { radius: 220, strength: 6 })

// 改为
this.applyRadialImpulse(x, y, { radius: 150, strength: 4 })
```

---

### 如果想要更多/更少载具

**修改显示数量：**
1. 进入车库
2. 使用页面上的下拉菜单选择：
   - 10辆
   - 20辆（推荐）
   - 30辆
   - 50辆
   - 全部

**性能建议：**
- 10-20辆：非常流畅
- 30辆：流畅
- 50辆：可能略卡
- 100辆以上：不推荐

---

## 🎨 视觉效果说明

### 载具尺寸
- 最小：120px
- 最大：180px
- 平均：150px
- **比原来大了约87.5%**

### 光晕效果

**蓝色光晕（悬停/选中）：**
```javascript
shadowColor: 'rgba(102, 126, 234, 0.8)'
shadowBlur: 25px
```

**红色闪烁（碰撞）：**
```javascript
shadowColor: 'rgba(255, 100, 100, 0.6)'
shadowBlur: 20px
duration: 10帧 (约0.16秒)
```

---

## 🐛 常见问题

### Q1: 载具不动了？
**原因：** 能量逐渐衰减到0

**解决方案：**
- 点击空白区域施加冲击波
- 或刷新页面重新加载

### Q2: 载具卡在一起？
**原因：** 碰撞后未完全分离

**临时解决：**
- 点击它们附近的空白处
- 冲击波会将它们震开

**永久解决：**
增大分离距离（修改第670行）：
```javascript
// 原来
const overlap = (v1.radius + v2.radius - distance) / 2

// 改为
const overlap = (v1.radius + v2.radius - distance) / 2 + 2  // 多分离2像素
```

### Q3: 点击载具没反应？
**原因：** 点击位置不准确

**解决方案：**
- 点击载具的中心位置
- 载具使用圆形碰撞检测，边缘可能点不中
- 开启调试模式查看实际碰撞范围

### Q4: 冲击波效果不明显？
**原因：** 点击位置周围没有载具

**解决方案：**
- 点击载具密集的区域
- 或者增大冲击半径和强度

---

## 📝 使用技巧

### 技巧1：创造连锁反应
1. 等待载具聚集
2. 点击中心位置
3. 观察连锁碰撞效果

### 技巧2：制造混乱
1. 快速多次点击不同位置
2. 创造多个冲击波
3. 观察载具四处乱飞

### 技巧3：精准控制
1. 点击单个载具附近
2. 只影响该载具
3. 控制其移动方向

### 技巧4：清理聚集
1. 当载具聚在一起时
2. 点击它们中间
3. 瞬间震散

---

## 🎯 最佳实践

### 创作载具时
- 使用多种颜色让载具更容易识别
- 绘制有特色的形状
- 不要画得太小（可能看不清）
- 不要全画在角落（碰撞半径可能不准）

### 观看车库时
- 推荐显示20-30辆
- 开启调试模式观察碰撞
- 多尝试点击不同位置
- 观察大小车的碰撞差异

### 性能优化时
- 限制载具数量≤30辆
- 关闭调试模式（减少绘制开销）
- 清理浏览器缓存
- 使用现代浏览器（推荐Chrome）

---

## 📈 数据监控

### 在控制台中查看数据

**查看当前载具数量：**
```javascript
vm.$data.vehicleSprites.length
```

**查看某个载具的属性：**
```javascript
const vehicle = vm.$data.vehicleSprites[0]
console.log({
  位置: { x: vehicle.x, y: vehicle.y },
  速度: { vx: vehicle.vx, vy: vehicle.vy },
  尺寸: vehicle.size,
  质量: vehicle.mass,
  碰撞半径: vehicle.radius,
  冷却时间: vehicle.collisionCooldown
})
```

**查看所有载具的速度：**
```javascript
vm.$data.vehicleSprites.forEach((v, i) => {
  const speed = Math.sqrt(v.vx ** 2 + v.vy ** 2)
  console.log(`载具${i}: 速度=${speed.toFixed(2)}`)
})
```

---

## 🔗 相关文档

- `DRAW_CAR_COMPARISON.md` - 功能对比分析
- `DRAW_CAR_ENHANCEMENT_REPORT.md` - 增强功能报告
- `/Users/zobot/Desktop/unsplash-crawler/画个车/README.md` - 原始项目说明

---

## 💡 创意玩法

### 玩法1：车辆保龄球
1. 让载具聚集成一堆
2. 创建一个快速移动的载具（冲击波）
3. 观察它撞散其他载具

### 玩法2：弹球游戏
1. 点击边缘发射载具
2. 观察它在车库中弹跳
3. 看能弹多少次才停下

### 玩法3：碰撞实验
1. 创建一大一小两个载具
2. 让它们正面碰撞
3. 观察质量差异的效果

---

**祝你玩得开心！🚀**

有任何问题或建议，欢迎反馈！


