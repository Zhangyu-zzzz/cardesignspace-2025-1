# 真机调试问题排查指南

## 问题：真机上没有内容显示

### 可能原因和解决方案

#### 1. 域名白名单问题（最常见）

**问题**：真机需要配置合法域名，而开发者工具可以关闭域名检查。

**解决方案**：
1. 登录 [微信公众平台](https://mp.weixin.qq.com/)
2. 进入"开发" -> "开发管理" -> "开发设置"
3. 在"服务器域名"中配置：
   - **request合法域名**：添加 `https://www.cardesignspace.com`
   - **uploadFile合法域名**：添加 `https://www.cardesignspace.com`
   - **downloadFile合法域名**：添加 `https://www.cardesignspace.com`

**注意**：
- 域名必须使用 HTTPS
- 域名必须经过 ICP 备案
- 配置后需要等待几分钟生效

#### 2. 网络请求失败

**检查方法**：
1. 在真机上打开调试模式
2. 查看控制台错误信息
3. 检查网络连接

**解决方案**：
- 确保手机网络正常
- 检查 API 服务器是否可访问
- 查看 `utils/api.js` 中的错误处理

#### 3. 数据加载失败

**检查方法**：
1. 查看页面 JS 文件中的 `console.log` 输出
2. 检查数据是否正确返回
3. 查看页面 WXML 中的数据绑定

**解决方案**：
- 检查 API 返回的数据格式
- 确保数据字段名称匹配
- 添加错误处理和空状态显示

#### 4. 代码错误

**检查方法**：
1. 查看真机控制台的错误信息
2. 检查是否有 JavaScript 语法错误
3. 检查是否有未定义的变量或函数

**解决方案**：
- 修复代码错误
- 添加 try-catch 错误处理
- 使用 `wx.showToast` 显示错误提示

### 调试步骤

1. **开启真机调试**
   - 在微信开发者工具中点击"预览"
   - 用微信扫码打开小程序
   - 在手机上打开调试模式（右上角菜单 -> 打开调试）

2. **查看控制台**
   - 在开发者工具中查看"调试器" -> "Console"
   - 查看网络请求是否成功
   - 查看是否有 JavaScript 错误

3. **检查网络请求**
   - 在"调试器" -> "Network" 中查看请求
   - 检查请求 URL 是否正确
   - 检查响应状态码和内容

4. **添加调试日志**
   - 在关键位置添加 `console.log`
   - 查看数据加载流程
   - 确认数据是否正确设置

### 常见错误信息

1. **"request:fail"**
   - 域名未配置或网络问题
   - 解决：配置合法域名

2. **"request:fail timeout"**
   - 请求超时
   - 解决：检查网络或增加超时时间

3. **"request:fail domain not in whitelist"**
   - 域名不在白名单中
   - 解决：在微信公众平台配置合法域名

4. **页面空白**
   - 数据未加载或加载失败
   - 解决：检查数据加载逻辑和错误处理

### 快速检查清单

- [ ] 是否在微信公众平台配置了合法域名？
- [ ] 域名是否使用 HTTPS？
- [ ] 域名是否已备案？
- [ ] 真机网络是否正常？
- [ ] 控制台是否有错误信息？
- [ ] 网络请求是否成功？
- [ ] 数据是否正确返回？
- [ ] 页面数据绑定是否正确？

### 测试建议

1. **先在开发者工具中测试**
   - 确保功能正常
   - 检查控制台无错误

2. **使用预览功能测试**
   - 在真机上预览
   - 查看实际效果

3. **使用真机调试**
   - 开启调试模式
   - 查看详细错误信息

4. **检查网络环境**
   - 确保手机能访问 API 服务器
   - 检查防火墙设置

